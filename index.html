<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIVM Control Center | Lightchain AI</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <style>
        :root { --primary: #5865f2; --secondary: #00ff80; --danger: #ff4444; --bg: #0f1016; --nav-bg: #13141f; --card: #1a1b26; --border: #2d2f45; --text: #ffffff; --text-dim: #94a3b8; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', -apple-system, sans-serif; }
        body { background: var(--bg); color: var(--text); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        /* RELEASE VERSION TOP NAV */
        header { height: 64px; background: var(--nav-bg); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 24px; }
        .header-left-group { display: flex; align-items: center; gap: 20px; }
        .brand-title { font-weight: 800; color: var(--primary); font-size: 1.1rem; letter-spacing: -0.5px; }
        .nav-identity-group { display: flex; align-items: center; gap: 10px; padding-left: 20px; border-left: 1px solid var(--border); }
        .nav-sbt-svg { width: 26px; height: 26px; opacity: 0.3; transition: 0.3s; }
        .nav-sbt-svg.active { opacity: 1; filter: drop-shadow(0 0 8px var(--primary)); }
        
        .header-right { display: flex; align-items: center; gap: 16px; }
        .cluster-pill { background: #000; padding: 6px 14px; border-radius: 20px; border: 1px solid #1e293b; font-size: 0.75rem; display: flex; align-items: center; gap: 8px; }
        .status-dot { width: 8px; height: 8px; background: var(--secondary); border-radius: 50%; box-shadow: 0 0 6px var(--secondary); }
        .load-text { color: var(--text-dim); }

        .wallet-pill { background: #1e293b; padding: 6px 14px; border-radius: 8px; font-family: monospace; border: 1px solid var(--border); font-size: 0.75rem; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: 0.2s; }
        .wallet-pill:hover { border-color: var(--primary); background: #252f41; }
        .balance-txt { color: var(--secondary); font-weight: 700; border-right: 1px solid var(--border); padding-right: 10px; }
        .btn-connect { background: var(--primary); color: white; border: none; padding: 8px 16px; border-radius: 6px; font-weight: 700; cursor: pointer; font-size: 0.8rem; }

        /* LAYOUT CORE */
        .container { display: flex; flex: 1; overflow: hidden; }
        .sidebar { width: 420px; background: var(--nav-bg); border-right: 1px solid var(--border); padding: 24px; display: flex; flex-direction: column; gap: 16px; }
        .main-content { flex: 1; padding: 24px; display: flex; flex-direction: column; gap: 24px; overflow-y: auto; }
        .console { height: 240px; background: #000; border: 1px solid var(--border); border-radius: 8px; padding: 14px; font-family: 'Fira Code', monospace; font-size: 0.75rem; color: #7dd3fc; overflow-y: auto; overflow-x: hidden; white-space: pre-wrap; word-break: break-all; line-height: 1.4; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; }
        .card-title { font-size: 0.65rem; font-weight: 800; color: var(--text-dim); text-transform: uppercase; margin-bottom: 14px; letter-spacing: 1px; }
        #toast { position: fixed; bottom: 24px; right: 24px; background: var(--nav-bg); border: 1px solid var(--primary); color: white; padding: 12px 20px; border-radius: 8px; display: none; font-size: 0.85rem; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.5); }
    </style>
</head>
<body>
    <header>
        <div class="header-left-group">
            <div class="brand-title">Lightchain AI</div>
            <button class="btn-connect" id="connect-btn" onclick="connect()">Connect Wallet</button>
            <div class="nav-identity-group">
                <div id="sbt-svg-container" class="nav-sbt-svg"></div>
                <span id="nav-id-desc" style="font-size: 0.75rem; color: var(--text-dim);">Identity Offline</span>
            </div>
        </div>
        <div class="header-right">
            <div class="cluster-pill">
                <span class="status-dot"></span>
                <span>SDXL-Turbo Cluster</span>
                <span class="load-text">Load: 14%</span>
            </div>
            <div class="wallet-pill" id="wallet-pill" onclick="copyAddress()" style="display:none">
                <span id="balance-display" class="balance-txt">0.00 LCAI</span>
                <span id="address-display">0x00...00</span>
            </div>
        </div>
    </header>

    <div class="container">
        <aside class="sidebar">
            <div class="card"><div class="card-title">System Status Window</div><div id="console-output" class="console"></div></div>
            <div class="card">
                <div class="card-title">Vault Control</div>
                <div id="revenue-display" style="font-size: 1.4rem; font-weight: 800; color: var(--secondary);">0.00 LCAI</div>
                <button class="btn-connect" style="width:100%; margin-top:12px; background:#f59e0b; color:black" onclick="withdraw()">Withdraw Revenue</button>
            </div>
        </aside>
        <main class="main-content">
            <div id="unlocked-notice" class="card" style="text-align:center; border-color:var(--secondary);">
                <h2 style="color:var(--secondary)">Protocol Unlocked</h2>
                <p style="color:var(--text-dim); font-size:0.9rem; margin-top:8px;">Native AIVM access is currently active via your ZK-Pass.</p>
            </div>
        </main>
    </div>
    <div id="toast"></div>

    <script>
        const CONFIG = { SBT_ADDR: "0xd71462F0002Ee9373fCe05B568583Ed13e75f600", AIVM_ADDR: "0xbcA38515887Dc3Ca163398C0Ef7bF02dd156D8FB" };
        let userAddr;

        function log(m) { const out = document.getElementById('console-output'); const d = document.createElement('div'); d.innerText = `> ${m}`; out.appendChild(d); out.scrollTop = out.scrollHeight; }
        
        async function connect() {
            if (!window.ethereum) return notify("Install MetaMask");
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            userAddr = accounts[0];
            document.getElementById('connect-btn').style.display = 'none';
            document.getElementById('wallet-pill').style.display = 'flex';
            document.getElementById('address-display').innerText = `${userAddr.slice(0,6)}...${userAddr.slice(-4)}`;
            log(`Session Authorized: ${userAddr}`);
        }

        function copyAddress() {
            navigator.clipboard.writeText(userAddr);
            notify("Address Copied");
        }

        function notify(m) { const t = document.getElementById('toast'); t.innerText = m; t.style.display = 'block'; setTimeout(() => t.style.display='none', 3000); }
        
        log("LCAI V2 Kernel Initialized...");
    </script>
</body>
</html>
